<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Новый заказ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <form class="form">
        <h1 class="form__title">Новый заказ</h1>

        <div class="form__group">
            <input class="form__input" placeholder=" " id="first_name">
            <label class="form__label">Имя</label>
        </div>

        <div class="form__group">
            <input class="form__input" placeholder=" " id="last_name">
            <label class="form__label">Фамилия</label>
        </div>

        <div class="form__group">
            <input class="form__input" placeholder=" " id="patronymic">
            <label class="form__label">Отчество</label>
        </div>

        <div class="form__group">
            <input class="form__input" placeholder=" " id="index">
            <label class="form__label">Индекс</label>
        </div>

        <div class="form__group">
            <input class="form__input" placeholder=" " id="city">
            <label class="form__label">Город</label>
        </div>

        <div class="form__group">
            <input class="form__input" placeholder=" " id="adress">
            <label class="form__label">Адрес</label>
        </div>
        <div class="form__group" id="error"></div>
        
        <button type="button" class="form__button" id="create">Создать</button>
    </form> 
    <script>
        let tg=window.Telegram.WebApp;
        tg.expand();
        let create = document.getElementById("create");
        create.addEventListener("click", () => {
            document.getElementById("error").innerText="";
            let first_name = document.getElementById("first_name").value;
            let last_name = document.getElementById("last_name").value;
            let patronymic = document.getElementById("patronymic").value;
            let index = document.getElementById("index").value;
            let city = document.getElementById("city").value;
            let adress = document.getElementById("adress").value;
            if(first_name.length < 1){
                document.getElementById("error").innerText = "Введите имя";
                return;
            }
            if(last_name.length < 1){
                document.getElementById("error").innerText = "Введите фамилию";
                return;
            }
            if(patronymic.length < 1){
                document.getElementById("error").innerText = "Введите отчество";
                return;
            }
            if(index.length < 1){
                document.getElementById("error").innerText = "Введите индекс";
                return;
            }
            if(city.length < 1){
                document.getElementById("error").innerText = "Введите город";
                return;
            }
            if(adress.length < 1){
                document.getElementById("error").innerText = "Введите адресс";
                return;
            }
            let data = {first_name:first_name,last_name:last_name,patronymic:patronymic,index:index,city:city,adress:adress};
            tg.sendData(JSON.stringify(data));
            tg.close();
        })
    </script>
</body>
</html>
